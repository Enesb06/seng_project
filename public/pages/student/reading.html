<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Okuma Materyalleri - LearnENG.com</title>
    
    <link rel="stylesheet" href="../../assets/css/main.css">
    <link rel="stylesheet" href="../../assets/css/dashboard.css">
    <link rel="stylesheet" href="../../assets/css/reading.css">
    
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
 
    <!-- Tercih ve Yeni Materyal OluÅŸturma ModalÄ± -->
    <div id="preferences-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="close-modal-btn" class="close-button">&times;</button>
            <h2>Yeni Materyal OluÅŸtur</h2>
            <p>Sana Ã¶zel bir okuma materyali oluÅŸturalÄ±m.</p>
            <form id="preferences-form">
                <label for="interest-category">Hangi Konu Ä°lgini Ã‡ekiyor?</label>
                <select id="interest-category" required>
                    <option value="" disabled selected>-- Bir kategori seÃ§ --</option>
                    <option value="technology">Teknoloji</option>
                    <option value="science">Bilim</option>
                    <option value="history">Tarih</option>
                    <option value="art and culture">Sanat ve KÃ¼ltÃ¼r</option>
                    <option value="travel">Seyahat</option>
                    <option value="daily life">GÃ¼nlÃ¼k YaÅŸam</option>
                </select>
                <label for="difficulty-level">Ä°ngilizce Seviyen Nedir?</label>
                <select id="difficulty-level" required>
                    <option value="A1">A1 (Beginner)</option>
                    <option value="A2">A2 (Elementary)</option>
                    <option value="B1">B1 (Intermediate)</option>
                    <option value="B2">B2 (Upper-Intermediate)</option>
                    <option value="C1">C1 (Advanced)</option>
                </select>
                <label for="content-length">Materyal UzunluÄŸu NasÄ±l Olsun?</label>
                <select id="content-length" required>
                    <option value="short">KÄ±sa (~150 kelime)</option>
                    <option value="medium">Orta (~300 kelime)</option>
                    <option value="long">Uzun (~500+ kelime)</option>
                </select>
                <button type="submit" id="generate-content-btn">OluÅŸtur</button>
            </form>
        </div>
    </div>
 
    <div class="dashboard-container">
        <!-- SOL MENÃœ (SIDEBAR) -->
        <aside class="sidebar">
            <div class="logo"><a href="../../student.html">LearnENG</a></div>
            <nav>
                <ul>
                    <li><a href="../../student.html">ğŸ  Ana Sayfa</a></li>
<li class="active"><a href="reading.html">ğŸ“š Okuma Materyalleri</a></li>
<li><a href="favorites.html">â­ Favorilerim</a></li>
<li><a href="wordlist.html">ğŸ“ Kelime Listem</a></li>
<li><a href="quiz.html">ğŸ§  Quiz'lerim</a></li>
<li><a href="ai-chat.html">ğŸ¤– AI Asistan</a></li>
<li><a href="support.html">ğŸ’¬ Destek</a></li>
<li><a href="profile.html">ğŸ“Š Profilim & Ä°statistikler</a></li>
<li><a href="../common/settings.html">âš™ï¸ Ayarlar</a></li>
                </ul>
            </nav>
        </aside>
 
        <!-- ANA Ä°Ã‡ERÄ°K BÃ–LÃœMÃœ -->
        <div class="main-content" style="height: 100vh; display: flex; flex-direction: column; overflow: hidden;">
            <!-- Ãœst BaÅŸlÄ±k -->
            <header class="dashboard-header" style="flex-shrink: 0;">
                <h2>Okuma Materyalleri</h2>
                <<div class="user-info" style="display: flex; align-items: center; gap: 15px;">
        <img id="header-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=base" style="width: 35px; height: 35px; border-radius: 50%; border: 2px solid #4CAF50; object-fit: cover;">
        <span id="welcome-message"></span>
        <button id="logout-button">Ã‡Ä±kÄ±ÅŸ Yap</button>
    </div>
</header>
 
            <!-- Ana Ã‡alÄ±ÅŸma AlanÄ± -->
            <main class="content-area" style="flex: 1; overflow: hidden; padding: 20px;">
                <div class="reading-layout" style="display: grid; grid-template-columns: 300px 1fr; gap: 20px; height: 100%;">
                    
                    <!-- SOL SÃœTUN: Liste ve GeÃ§miÅŸ -->
                    <div class="sidebar-column card" style="display: flex; flex-direction: column; height: 100%; overflow: hidden; padding: 0;">
                        <div style="padding: 15px; border-bottom: 1px solid #eee;">
                            <h3 style="margin:0; font-size: 1rem;">Materyallerim</h3>
                            <button id="new-material-btn" class="cta-button" style="margin-top:10px; padding: 5px; width: 100%;">+ Yeni OluÅŸtur</button>
                        </div>
                        
                        <!-- Materyal listesi -->
                        <div id="materials-list" style="flex: 1; overflow-y: auto; padding: 10px;"></div>
                        
                        <div style="padding: 10px 15px; background: #f1f5f9; border-top: 1px solid #ddd; border-bottom: 1px solid #ddd;">
                            <h3 style="margin:0; font-size: 0.9rem;">ğŸ“œ Not GeÃ§miÅŸim</h3>
                        </div>
                        <div id="note-history-list" style="flex: 1; overflow-y: auto; padding: 10px;">
                            <!-- Notu olan yazÄ±lar buraya gelecek -->
                        </div>
                    </div>
 
                    <!-- SAÄ SÃœTUN: Metin ve Not Kutusu -->
                    <div class="reader-column card" style="display: flex; flex-direction: column; height: 100%; overflow: hidden; padding: 0;">
                        <!-- Okuma AlanÄ± (Metin uzunsa burada kayar) -->
                        <div id="reading-container" class="reading-container" style="flex: 1; overflow-y: auto; padding: 30px;">
                            <h1 id="reading-title">LÃ¼tfen bir yazÄ± seÃ§in</h1>
                            <div id="reading-body" style="font-size: 1.1rem; line-height: 1.8;"></div>
                            <div id="loader" class="hidden">Yapay zeka yazÄ±yor...</div>
 
                            <!-- SaÄŸ alt kalp butonu -->
                            <button id="favorite-btn" class="favorite-btn" type="button">â™¡</button>
                        </div>
 
                        <!-- Not AlanÄ± (Her zaman en altta sabit) -->
                        <div id="note-editor-area" style="flex-shrink: 0; background: #fafafa; border-top: 3px solid #4CAF50; padding: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <h4 style="margin:0;">ğŸ“ Bu YazÄ± Ä°Ã§in NotlarÄ±m</h4>
                                <span id="save-indicator" style="color: green; font-weight: bold; display: none;">Kaydedildi!</span>
                            </div>
                            <textarea id="note-textarea" rows="4" style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; resize: none; font-family: inherit;" placeholder="Bu yazÄ±ya Ã¶zel notlarÄ±nÄ± yaz..."></textarea>
                            <button id="save-note-btn" class="cta-button" style="width: 100%; margin-top: 10px; background: #4CAF50;">Notu Kaydet (Ctrl+Enter)</button>
                        </div>
                    </div>
 
                </div>
            </main>
        </div>
    </div>
 
    <!-- Ã‡eviri Tooltip'i -->
    <!-- Ã‡eviri Tooltip'i (GÃœNCELLENDÄ°) -->
    <div id="translation-tooltip">
      <strong id="tooltip-word">Word</strong>
      <span id="tooltip-meaning" class="meaning">AnlamÄ± yÃ¼kleniyor...</span>
    
    <!-- ButonlarÄ± bir arada tutan yeni alan -->
      <div class="tooltip-actions" style="display: flex; gap: 8px; margin-top: 8px;">
          <button id="add-to-wordlist-btn" class="add-btn">Kelime Listeme Ekle</button>
        <!-- YENÄ° EKLENEN HOPARLÃ–R BUTONU -->
          <button id="play-pronunciation-btn" class="speak-btn" title="Telaffuzu Dinle">ğŸ”Š</button>
      </div>
    </div>
 
    <script type="module" src="../../assets/js/student/reader.js"></script>

  
    <script type="module">
      const params = new URLSearchParams(window.location.search);
      const openId = params.get('open');

      if (openId) {
        const tryOpen = () => {
          if (window.displayMaterial) {
            window.displayMaterial(openId);
          } else {
            setTimeout(tryOpen, 50);
          }
        };
        tryOpen();
      }
    </script>
</body>
</html>
