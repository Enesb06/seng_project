<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>My Profile & Statistics - LearnENG.com</title>

  <link rel="stylesheet" href="../../assets/css/main.css">
  <link rel="stylesheet" href="../../assets/css/dashboard.css">
  <link rel="stylesheet" href="../../assets/css/profile.css">

  <!-- âœ… Icons (Font Awesome) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <div class="dashboard-container">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="logo"><a href="../../student.html">LearnENG</a></div>
      <nav>
        <ul>
          <li><a href="../../student.html"> Home</a></li>
          <li><a href="reading.html"> Reading Materials</a></li>
          <li><a href="favorites.html"> Favorites</a></li>
          <li><a href="wordlist.html"> Word List</a></li>
          <li><a href="quiz.html"> Quizzes</a></li>
          <li><a href="ai-chat.html"> AI Assistant</a></li>
          <li><a href="support.html"> Support</a></li>
          <li class="active"><a href="profile.html"> My Profile & Statistics</a></li>
          <li><a href="../common/settings.html"> Settings</a></li>
        </ul>
      </nav>
    </aside>

    <!-- MAIN CONTENT -->
    <div class="main-content">
      <header class="dashboard-header">
        <h2>My Profile & Progress</h2>

        <div class="user-info" style="display:flex;align-items:center;gap:15px;">
          <img id="header-avatar"
               src="https://api.dicebear.com/7.x/avataaars/svg?seed=base"
               style="width:35px;height:35px;border-radius:50%;border:2px solid #7314c6;object-fit:cover;">

          <span id="welcome-message"></span>

          <!-- ðŸ”¥ STREAK -->
          <span id="streak-header" class="hidden"></span>

          <button id="logout-button">Logout</button>
        </div>
      </header>

      <main class="content-area">

        <!-- TOP GRID -->
        <div class="profile-header-grid">

          <!-- USER CARD -->
          <div class="card user-profile-card">
            <div class="avatar">
              <!-- JS zaten user.avatar_url ile header'Ä± deÄŸiÅŸtiriyor.
                   Profil kartÄ± avatarÄ±nÄ± da sen â€œtamam olduâ€ dediÄŸin ÅŸekilde sen gÃ¼ncelledin.
                   Bu img tag'i sende varsa kalsÄ±n. Yoksa bu haliyle de gÃ¼zel gÃ¶rÃ¼nÃ¼r. -->
              <img id="profile-avatar" alt="avatar" />
            </div>

            <h3 id="profile-name">Loading...</h3>
            <p id="profile-email">---</p>
          </div>

          <!-- STATS -->
          <div class="stats-grid-mini">

            <div class="card stat-card stat-reading">
              <div class="stat-top">
                <span class="stat-icon" aria-hidden="true">
                  <i class="fa-solid fa-book-open"></i>
                </span>
                <h4>Reading Count</h4>
              </div>

              <div class="stat-main">
                <span id="stat-readings" class="stat-value">0</span>
              </div>

              <div class="stat-sub">
                Total materials read
              </div>
            </div>

            <div class="card stat-card stat-words">
              <div class="stat-top">
                <span class="stat-icon" aria-hidden="true">
                  <i class="fa-solid fa-spell-check"></i>
                </span>
                <h4>Learned Words</h4>
              </div>

              <div class="stat-main">
                <span id="stat-words" class="stat-value">0</span>
              </div>

              <div class="stat-sub">
                Words marked as learned
              </div>
            </div>

            <div class="card stat-card stat-quiz">
              <div class="stat-top">
                <span class="stat-icon" aria-hidden="true">
                  <i class="fa-solid fa-trophy"></i>
                </span>
                <h4>Quiz Average</h4>
              </div>

              <div class="stat-main">
                <span id="stat-quiz-avg" class="stat-value">%0</span>
              </div>

              <div class="stat-sub">
                Last results summary
              </div>
            </div>

          </div>
        </div>

        <!-- BADGES -->
        <div class="card badges-section">
          <div class="section-head">
            <h3>Earned Badges</h3>
            <p class="section-desc"></p>
          </div>
          <div id="badges-container" class="badges-list"></div>
        </div>

        <!-- HISTORY -->
        <div class="card history-section">
          <div class="section-head">
            <h3>Quiz History</h3>
            <p class="section-desc"></p>
          </div>

          <div class="table-wrap">
            <table class="history-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Correct Answers</th>
                  <th>Total Questions</th>
                  <th>Success Rate</th>
                </tr>
              </thead>
              <tbody id="quiz-history-body"></tbody>
            </table>
          </div>
        </div>

      </main>
    </div>
  </div>

  <script type="module" src="../../assets/js/student/profile.js"></script>
</body>
</html>
