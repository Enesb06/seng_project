<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>My Profile & Statistics - LearnENG.com</title>

  <link rel="stylesheet" href="../../assets/css/main.css">
  <link rel="stylesheet" href="../../assets/css/dashboard.css">
  <link rel="stylesheet" href="../../assets/css/profile.css">
  <link rel="stylesheet" href="../../assets/css/style.css">

  <!-- ✅ Icons (Font Awesome) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>
  <img class="global-bg" src="../../assets/css/images/background.jpg" alt="">
  <div class="dashboard-container">
    <!-- SIDEBAR -->
    <header class="topbar">
      <a class="brand" id="logo-link" href="#">LearnENG</a>
      <div class="user-info">
        <span id="streak-header" class="hidden"></span>
          <img id="user-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=base" alt="Avatar">
          <span id="welcome-message"></span>
          <button id="logout-button">Logout</button>
      </div>
  </header>

  <nav class="pill-nav">
      <div class="nav-shell">
          <ul id="nav-links"></ul>
      </div>
  </nav>

    <!-- MAIN CONTENT -->
    <div class="main-content">
  

      <main class="content-area">

        <!-- TOP GRID -->
        <div class="profile-header-grid">

          <!-- USER CARD -->
          <div class="card user-profile-card">
            <div class="avatar">
              <!-- JS zaten user.avatar_url ile header'ı değiştiriyor.
                   Profil kartı avatarını da sen “tamam oldu” dediğin şekilde sen güncelledin.
                   Bu img tag'i sende varsa kalsın. Yoksa bu haliyle de güzel görünür. -->
              <img id="profile-avatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=base" alt="avatar" />
            </div>

            <h3 id="profile-name">Loading...</h3>
            <p id="profile-email">---</p>
          </div>

          <!-- STATS -->
          <div class="stats-grid-mini">

            <div class="card stat-card stat-reading">
              <div class="stat-top">
                <span class="stat-icon" aria-hidden="true">
                  <i class="fa-solid fa-book-open"></i>
                </span>
                <h4>Reading Count</h4>
              </div>

              <div class="stat-main">
                <span id="stat-readings" class="stat-value" style=" color:rgba(155, 79, 226, 0.509)">0</span>
              </div>

              <div class="stat-sub" style=" color:#584965df">
                Total materials read
              </div>
            </div>

            <div class="card stat-card stat-words">
              <div class="stat-top">
                <span class="stat-icon" aria-hidden="true">
                  <i class="fa-solid fa-spell-check"></i>
                </span>
                <h4>Learned Words</h4>
              </div>

              <div class="stat-main">
                <span id="stat-words" class="stat-value" style=" color:rgba(155, 79, 226, 0.509) ">0</span>
              </div>

              <div class="stat-sub" style=" color:#584965df">
                Words marked as learned
              </div>
            </div>

            <div class="card stat-card stat-quiz">
              <div class="stat-top">
                <span class="stat-icon" aria-hidden="true">
                  <i class="fa-solid fa-trophy"></i>
                </span>
                <h4>Quiz Average</h4>
              </div>

              <div class="stat-main">
                <span id="stat-quiz-avg" class="stat-value" style="color:rgba(155, 79, 226, 0.509)">%0</span>
              </div>

              <div class="stat-sub" style=" color:#584965df">
                Average of the quizzes
              </div>
            </div>

          </div>
        </div>

        <!-- BADGES -->
        <div class="card badges-section">
          <div class="section-head">
            <h3>Earned Badges</h3>
            <p class="section-desc"></p>
          </div>
          <div id="badges-container" class="badges-list"></div>
        </div>

        <!-- HISTORY -->
        <div class="card history-section">
          <div class="section-head">
            <h3>Quiz History</h3>
            <p class="section-desc"></p>
          </div>

          <div class="table-wrap">
            <table class="history-table">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Correct Answers</th>
                  <th>Total Questions</th>
                  <th>Success Rate</th>
                </tr>
              </thead>
              <tbody id="quiz-history-body"></tbody>
            </table>
          </div>
        </div>

      </main>
    </div>
  </div>

  <script type="module" src="../../assets/js/student/profile.js"></script>
  <script type="module">
    import { initNavbar } from "../../assets/js/common/navbar.js";
    initNavbar({ active: "profile" });
</script>
</body>
</html>
